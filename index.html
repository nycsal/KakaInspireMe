<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kaka Inspire Me</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      width: 100vw; height: 100vh; padding: 0; margin: 0; overflow: hidden;
      background: radial-gradient(circle, #fff8e1 0%, #ffd54f 100%);
      font-family: 'Segoe UI', 'Arial', sans-serif;
    }
    body {
      width: 100vw; height: 100vh; position: relative;
    }
    .branding-bar {
      position: absolute;
      width: 100vw;
      top: 5vh;
      left: 0;
      display: flex;
      justify-content: center;
      z-index: 100;
      pointer-events: none;
    }
    .branding-text {
      color: #24A0ED;
      font-family: 'Segoe UI', 'Arial', sans-serif;
      font-weight: 900;
      font-size: 4.5vw;
      padding: 0.55em 1em 0.4em 1em;
      border: 6px solid #ffe600;
      border-radius: 1.2em;
      background: #fffde7fa;
      box-shadow: 0 6px 40px #ffe60040, 0 2px 32px #24A0ED22;
      letter-spacing: 0.1em;
      text-shadow: 0 2px 6px #ffe60077, 0 0 2px #fff;
      pointer-events: auto;
      transition: box-shadow 0.18s;
      min-width: 220px;
      max-width: 92vw;
      text-align: center;
      user-select: none;
    }
    @media (max-width: 600px) {
      .branding-text { font-size: 7vw; padding: .44em 0.2em 0.35em 0.2em; border-width: 3px; }
    }

    .fullscreen-flex {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100vw;
      height: 100vh;
      position: absolute;
      top: 0; left: 0;
      z-index: 1;
    }
    .octagon-btn {
      width: 65vw;
      max-width: 820px;
      min-width: 250px;
      aspect-ratio: 1 / 1;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      clip-path: polygon(
        30% 2%, 70% 2%, 98% 30%, 98% 70%,
        70% 98%, 30% 98%, 2% 70%, 2% 30%
      );
      background: conic-gradient(
        from 0deg,
        #fee140 0%,
        #fa709a 22%,
        #42e695 48%,
        #3bb2b8 65%,
        #fd6e6a 80%,
        #fcb045 100%
      ), 
      linear-gradient(135deg, #ffd54f 10%, #ffb300 90%);
      box-shadow:
        0 0 90px 16px #fff8,
        0 0 100px 54px #42e69588,
        0 24px 66px 0 #e6394660,
        0 7px 30px 0 #3bb2b877;
      position: relative;
      z-index: 2;
      transition: filter 0.25s;
      animation: pulseGlowBlack 1.7s cubic-bezier(.4,0,.6,1) infinite;
      border: none;
    }
    .octagon-btn:focus { outline: 2px solid #fa709a; }
    .octagon-btn:hover, .octagon-btn:focus {
      filter: brightness(1.08) drop-shadow(0 0 30px #fff47799);
    }
    @keyframes pulseGlowBlack {
      0%, 100% {
        transform: scale(1);
        box-shadow:
          0 0 90px 16px #fff8,
          0 0 70px 34px #42e69588,
          0 18px 50px 0 #e6394657,
          0 0 0 16px #fee1401b,
          0 9px 40px 0 #3bb2b877;
      }
      48% {
        transform: scale(1.10);
        box-shadow:
          0 0 190px 32px #ffb30087,
          0 0 100px 65px #42e695a1,
          0 28px 70px 0 #fa709a50,
          0 0 0 46px #ffd54f33,
          0 14px 65px 0 #ffda8b77;
      }
      75% {
        transform: scale(1.16);
        box-shadow:
          0 0 130px 46px #ffe546,
          0 0 130px 70px #3bb2b8e4,
          0 18px 80px 0 #ffcb4770,
          0 0 0 32px #ffe0823b,
          0 14px 95px 0 #e6e6fa44;
      }
    }
    .octagon-btn::before {
      content: "";
      position: absolute;
      z-index: 1;
      width: 82%; height: 75%;
      left: 9%; top: 12%;
      pointer-events: none;
      border-radius: 28%;
      background: linear-gradient(105deg, 
        rgba(255,255,255, 0.52) 13%,
        rgba(255,215,99,   0.38) 30%,
        rgba(88,255,255,   0.14) 74%,
        rgba(247, 85, 168, 0.19) 92%
      );
      filter: blur(6px) brightness(1.3);
      opacity: 0.56;
      box-shadow:
        0 0 28px 9px #fff2;
    }
    .octagon-btn-label {
      position: relative;
      z-index: 2;
      font-size: 5vw;
      letter-spacing: 0.05em;
      text-align: center;
      width: 100%;
      font-family: 'Segoe UI', 'Arial', sans-serif;
      font-weight: bold;
      color: #111 !important;
      text-shadow:
        0 2px 10px #fff9,
        0 2px 6px #ffe08e66,
        0 0px 12px #fff8;
      background: none;
      -webkit-background-clip: unset;
      -webkit-text-fill-color: unset;
      filter: drop-shadow(0 0 8px #fff57340);
      animation: textpulseBlack 1.7s cubic-bezier(.4,0,.6,1) infinite alternate;
    }
    @keyframes textpulseBlack {
      to { 
        text-shadow:
          0 4px 18px #ffd54f99,
          0 2px 18px #fffd,
          0 5px 18px #fff4;
      }
    }

    @media (max-width: 900px) {
      .octagon-btn, .octagon-btn-label { font-size: 7vw;}
      .octagon-btn-label { font-size: 8vw;}
    }
    @media (max-width: 600px) {
      .octagon-btn { min-width: 140px; font-size: 11vw; }
      .octagon-btn-label { font-size: 11vw; }
    }

    .poem-popup {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.27);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 99;
    }
    .poem-content {
      background: #fffde7;
      border-radius: 36px;
      padding: 6vw 3vw 4vw 3vw;
      width: 95vw;
      max-width: 970px;
      min-width: 200px;
      max-height: 97vh;
      overflow-y: auto;
      box-shadow: 0 20px 80px rgba(0,0,0,0.22);
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .poet-name {
      font-size: 3vw;
      color: #f57c00;
      margin-bottom: 3vw;
      font-weight: bold;
      text-align: center;
      letter-spacing: 1.5px;
    }
    .poem-original {
      font-size: 4.5vw;
      color: #7b1fa2;
      direction: rtl;
      font-family: 'Vazirmatn', sans-serif;
      font-weight: bold;
      line-height: 1.25;
      margin-bottom: 2.5vw;
      margin-top: 0em;
      text-align: center;
      letter-spacing: 1.3px;
    }
    .poem-phonetic, .poem-translation {
      font-size: 3vw;
      color: #111;
      margin-bottom: 2.2vw;
      text-align: center;
      line-height: 1.25;
    }
    .home-btn {
      margin-top: 2.5vw;
      padding: 2vw 9vw;
      background: #ffd54f;
      border: none;
      border-radius: 36px;
      font-size: 2.8vw;
      font-weight: 700;
      color: #6d4c41;
      cursor: pointer;
      box-shadow: 0 3px 20px rgba(0,0,0,0.13);
      transition: background 0.17s;
    }
    .home-btn:active { background: #ffe082; }
    @media (max-width: 600px) {
      .poem-content { padding: 6vw 2vw 4vw 2vw;}
      .poem-original {font-size: 7vw;}
      .poem-phonetic,.poem-translation,.poet-name {font-size: 5vw;}
      .home-btn { font-size: 4vw; padding: 4vw 13vw;}
    }
    @media (max-width: 400px) {
      .poem-content {padding: 5vw 1vw 4vw 1vw;}
      .poem-original { font-size: 8vw; }
      .poem-phonetic,.poem-translation,.poet-name {font-size: 6vw;}
      .home-btn { font-size: 5vw; padding: 4vw 15vw;}
    }
  </style>
</head>
<body>
  <div class="branding-bar">
    <span class="branding-text">KakaReza</span>
  </div>
  <div class="fullscreen-flex" id="main-content">
    <button class="octagon-btn" onclick="showPoem()">
      <span class="octagon-btn-label">Inspire Me</span>
    </button>
  </div>
  <div class="poem-popup" id="poemPopup" style="display:none">
    <div class="poem-content">
      <div class="poet-name" id="poetName"></div>
      <div class="poem-original" id="poemOriginal"></div>
      <div class="poem-phonetic" id="poemPhonetic"></div>
      <div class="poem-translation" id="poemTranslation"></div>
      <button class="home-btn" onclick="closePopup()">Home</button>
    </div>
  </div>
<script>
const localPoems = [
  {
    poet: "Saadi",
    original: "بنی آدم اعضای یکدیگرند که در آفرینش ز یک گوهرند",
    phonetic: "bani ādam a'zāye yek digarand ke dar āfarinesh ze yek goharand",
    translation: "Human beings are members of one body, created from the same essence."
  },
  {
    poet: "Rumi",
    original: "ای بس که نباشیم و جهان خواهد بود، نی نام ز ما و نی نشان خواهد بود",
    phonetic: "ey bas ke nabāshim o jahān xāhad bud, ni nām ze mā o ni nešān xāhad bud",
    translation: "So often we will not be, yet the world will remain; no name nor trace from us will that time contain."
  },
  {
    poet: "Khayyam",
    original: "بر لب جوی نشین و گذر عمر ببین\nکاین اشارت ز جهان گذران ما را بس",
    phonetic: "bar lab-e juy neshin o gozar-e omr bebin\nk'in eshārat ze jahān-e gozaran mā rā bas",
    translation: "Sit by the stream and watch how life passes by;\nThis indication from the fleeting world will suffice."
  },
  {
    poet: "Hafez",
    original: "به یاد کسی همیشه در این دل من، نسیم سحر گهی است",
    phonetic: "be yâd-e kasi hamishe dar in del-e man, nasim-e sahargahi ast",
    translation: "The remembrance of someone always in my heart, is like the dawn's breeze."
  },
  {
    poet: "Simin Behbahani",
    original: "بازآ که هنوز بر سر آنم که برآیم\nتا پرده براندازم و کاری بگشایم",
    phonetic: "bāzā ke hanuz bar sar-e ānam ke barāyam\nta pardeh barandāzam o kāri begoshāyam",
    translation: "Return, for I am still determined to rise,\nTo lift the curtain and undertake an endeavor."
  },
  {
    poet: "Forough Farrokhzad",
    original: "من از نهایت شب حرف می زنم\nمن از نهایت تاریکی و از نهایت شب حرف می زنم",
    phonetic: "man az nehāyat-e shab harf mizanam\nman az nehāyat-e tāriki va az nehāyat-e shab harf mizanam",
    translation: "I speak of the ends of night,\nI speak of the utmost darkness and the ends of night."
  }
];
let currentCycle = [];
let shownPoems = new Set();

async function queryPoem() {
  const bigPool = localPoems;
  if (currentCycle.length === 0) {
    const unshown = bigPool.filter(poem => !shownPoems.has(poem.original));
    if (unshown.length === 0) {
      shownPoems.clear();
      currentCycle = shuffleArray(bigPool.slice());
    } else {
      currentCycle = shuffleArray(unshown);
    }
  }
  const poem = currentCycle.pop();
  shownPoems.add(poem.original);
  return poem;
}
function shuffleArray(array) {
  let arr = array.slice();
  for (let i = arr.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}
async function showPoem() {
  const poem = await queryPoem();
  document.getElementById('poetName').textContent = poem.poet;
  document.getElementById('poemOriginal').textContent = poem.original;
  document.getElementById('poemPhonetic').textContent = poem.phonetic;
  document.getElementById('poemTranslation').textContent = poem.translation;
  document.getElementById('poemPopup').style.display = 'flex';
  document.getElementById('main-content').style.opacity = 0.13;
}
function closePopup() {
  document.getElementById('poemPopup').style.display = 'none';
  document.getElementById('main-content').style.opacity = 1;
}
</script>
</body>
</html>
